
import { stockedSize } from './../../model/product';
import * as SuperTest from "supertest";
import { CATEGORY, hashize } from "../../helper/utils";

import { app } from "../../start";

const request = SuperTest.default(app);

test("End-to-end test", async () => {
  const stock: stockedSize[] = [{
    size:7,
        amount: 8,
  }];
  const desc = {
    productInformation:{
      name: "testingrouter",
      brand: "Fila x Thug Club",
      description: "luh gëëk",
      color: "Black",
      generalColor:"BLACK",
      category:'1',
      price: 1000,
      stock: stock,
      price_factor: 1,
      images: ["https://image-cdn.hypb.st/https%3A%2F%2Fhypebeast.com%2Fimage%2F2023%2F12%2Fthug-club-x-fila-collaboration-release-info-011.jpg?cbr=1&q=90","data:image/jpeg;base64,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"],
     }
  };


  const add_product_request = await request.post("/product").send(desc);
  console.log(add_product_request.statusCode);
  console.log(add_product_request.text);
  console.log("BODUID",add_product_request.body.id);

  
  expect(add_product_request.statusCode).toEqual(200);
  if(add_product_request.statusCode == 200){
  //else delete product too

  const res2 = await request.delete(`/product/${hashize("testingrouter".concat("testingrouter"))}`).send();//This is the resulting id of the hardcoded productdescription
  console.log(res2.statusCode);
  console.log(res2.text);
  
  expect(res2.statusCode).toEqual(200);
  
  }
});
